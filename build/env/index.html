<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="normalize.css" />
        <link rel="stylesheet" href="styles.css" />
        
        <title>LogUI Test Environment</title>
    </head>

    <body>
        <h1>
            <span>LogUI Test Environment</span>
            <img src="../../.meta/logui.svg#black" />
        </h1>

        <div id="controls">
            <button id="control-start" disabled>Start LogUI</button>
            <button id="control-stop" disabled>Stop LogUI</button>
            <button id="control-clear">Clear Console</button>
            <span id="control-container">
                <span id="control-version"></span>
                <span id="control-status">JavaScript disabled!</span>
            </span>
        </div>

        <main>
            <p>This is a simple LogUI test environment. Use this with a build of LogUI and the console dispatcher (<code>npm run -s build:console</code>) to have LogUI drive the console at the bottom of the screen.</p>
            <p>Control LogUI with the buttons above, and interact with the sample elements below. Interact with the page, too. Try resizing the viewport, or scrolling with your mouse wheel or trackpad. Watch the corresponding log events appear in the console.</p>
            <p>Note that the events that appear in the console below are the log events that would otherwise be directed to the LogUI server. Check out the browser's console for verbose output on what is going on in terms of initialisation (if <code>verbose: true</code>).</p>

            <hr />

            <div id="elements-container">
                <div id="container-test-click" class="group-container">
                    <h2>Basic Hover/Click Events</h2>
                    <div>
                        <div class="test" id="test-click-box1" data-test-attribute="from the attribute!">Hover!</div>
                        <div class="test" id="test-click-box2">
                            <div class="test" id="test-click-box3">Nested</div>
                        </div>
                    </div>
                </div>
                <div id="container-test-dommanipulation" class="group-container">
                    <h2>Dynamic DOM Manipulation</h2>
                    <div>
                        <button id="test-dommanipulation-button">Click to add two new elements</button>
                        <div id="test-dommanipulation-newcontainer"></div>
                    </div>
                </div>
                <div id="container-test-dommanipulation" class="group-container">
                    <h2>Basic React Application</h2>
                    <div>
                        The app is below the horizontal rule.
                        <div id="test-reactapp-container"></div>
                    </div>
                </div>
            </div>

        </main>

        <div id="console">
            <ul id="console-list"></ul>
        </div>
    </body>

    <script src="controller.js"></script>
    <script src="../logui.bundle.js"></script>
    <script src="../reactapp.bundle.js"></script>
    <script>

        // LogUI.EventHandlers.somePluginAdded = (function(event) {
        //     var _public = {};
        //     var _timestamp = new Date().getTime();

        //     _public.someFn = function() {
        //         return Config.getTrackingConfig();
        //     }

        //     function _private() {
        //         return 2*3;
        //     }

        //     return _public;
        // })();

        var config = {
            logUIConfiguration: {
                //endpoint: 'http://127.0.0.1:8000/logUI/endpoint/',
                //authenticationToken: '????',
                consoleElement: '#console-list',
                verbose: true,
                sessionUUID: '1234-5678',

                browserEvents: {
                    blockEventBubbling: true,
                    eventsWhileScrolling: true,
                    URLChanges: true,
                    contextMenu: true,
                    pageFocus: true,
                    trackCursor: true,
                    cursorUpdateFrequency: 3200,
                    cursorLeavingPage: true,
                }
            },
            applicationSpecificData: {
                userID: 'userid',
                condition: 3,
                rotation: 1,
                experimentID: 'experimentIDString',
                applicationState: {
                    
                }
            },
            trackingConfiguration: {
                'firstComponent': {
                    selector: '.test',
                    event: 'mouseHover',
                    properties: {
                        blockEventBubbling: true,
                        mouseover: {
                            name: 'COMPONENT_MOUSE_OVER',
                        },
                        mouseout: {
                            name: 'COMPONENT_MOUSE_OUT',
                        }
                    },
                    metadata: [
                        {
                            logAs: 'LOG_NAME',
                            source: 'elementAttribute',
                            find: 'attributeName'
                        }
                    ],
                },

                'blah': {
                    selector: '#test-click-box1',
                    event: 'mouseover',
                    name: 'SOME_BLAH_HOVERIN',
                    metadata: [
                        {
                            nameForLog: 'LOG_AS_NAME',
                            sourcer: 'elementAttribute',
                            lookFor: 'data-test-attribute',
                        },
                        {
                            nameForLog: 'SOME_LOCAL_NAME',
                            sourcer: 'localStorage',
                            lookFor: 'testVarInLocal',
                        },
                        {
                            nameForLog: 'A_NEW_NAME',
                            sourcer: 'sessionStorage',
                            lookFor: 'sess',
                        }
                    ],
                },

                'clockHover': {
                    selector: '#test-reactapp-clock',
                    event: 'mouseover',
                    name: 'CLOCK_HOVER_TIME',
                    metadata: [
                        {
                            nameForLog: 'CURRENT_TIME',
                            sourcer: 'reactComponentState',
                            lookFor: 'time',
                        },
                        {
                            nameForLog: 'PROP_TEST',
                            sourcer: 'reactComponentProp',
                            lookFor: 'sampleProp',
                        }
                    ],
                }


                // 'something': {
                //     selector: '#test-dommanipulation-box2',
                //     event: 'somethingelse',
                // },
            },
        };
    </script>
</html>